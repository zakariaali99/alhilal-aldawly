{% extends 'base.html' %}
{% load i18n static %}

{% block title %}{{ article.title_ar }} | ALHILAL ALDAWLY{% endblock %}

{% block content %}
<section class="py-5 bg-black animate-on-scroll" style="min-height: 100vh;">
    <div class="container py-5 mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <nav aria-label="breadcrumb" class="mb-5">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'core:home' %}" class="text-primary text-decoration-none hover-lift">{% trans "Home" %}</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'news:list' %}" class="text-primary text-decoration-none hover-lift">{% trans "News" %}</a></li>
                        <li class="breadcrumb-item active text-dark" aria-current="page">{% if LANGUAGE_CODE == 'ar' %}{{ article.title_ar }}{% else %}{{ article.title_en }}{% endif %}</li>
                    </ol>
                </nav>

                <header class="article-header mb-5">
                    <small class="text-primary fw-bold text-uppercase d-block mb-3 ls-1"><i class="bi bi-calendar3 me-2"></i>{{ article.published_at|date:"d F Y" }}</small>
                    <h1 class="display-4 fw-bold text-dark mb-4 text-gradient">{% if LANGUAGE_CODE == 'ar' %}{{ article.title_ar }}{% else %}{{ article.title_en }}{% endif %}</h1>
                </header>

                <div class="article-featured glass-premium rounded-4 overflow-hidden mb-5 shadow-lg border-0 hover-lift" style="max-height: 500px;">
                    <img src="{{ article.featured_image.url }}" class="w-100 h-100 object-fit-cover transition-img" alt="{{ article.title_ar }}">
                </div>

                <div class="article-content text-muted fs-5 mb-5 lh-lg bg-light p-4 p-md-5 rounded-4 glass-premium border-0 shadow">{% if LANGUAGE_CODE == 'ar' %}{{ article.content_ar|safe }}{% else %}{{ article.content_en|safe }}{% endif %}</div>

                <hr class="border-secondary my-5">

                <section class="comments-section">
                    <h3 class="fw-bold text-dark mb-4 text-gradient">{% trans "Comments" %} ({{ approved_comments_count }})</h3>
                    <div class="comments-list mb-5">
                        {% for comment in approved_comments %}
                        <div class="comment glass-premium p-4 rounded-4 mb-3 border-0 shadow-sm hover-lift">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <strong class="text-primary fs-5">{{ comment.commenter.name }}</strong>
                                <small class="text-muted">{{ comment.created_at|timesince }} {% trans "ago" %}</small>
                            </div>
                            <p class="text-dark mb-0">{{ comment.content }}</p>
                        </div>
                        {% empty %}
                        <p class="text-muted italic">{% trans "No comments yet. Be the first to share your thoughts!" %}</p>
                        {% endfor %}
                    </div>

                    <div class="comment-form-box glass-premium p-4 p-md-5 rounded-4 border-0 shadow text-start hover-lift">
                        <h4 class="fw-bold text-dark mb-4 text-gradient">{% trans "Leave a Comment" %}</h4>
                        <form method="post" action="" id="comment-form" class="row g-3">
                            {% csrf_token %}
                            <div class="col-md-6">
                                <label class="form-label text-dark small">{% trans "Name" %}</label>
                                <input type="text" name="name" class="form-control bg-light border-secondary text-dark" placeholder="{% trans 'Your name' %}" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label text-dark small">{% trans "Email" %}</label>
                                <input type="email" name="email" class="form-control bg-light border-secondary text-dark" placeholder="{% trans 'Email address' %}" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label text-dark small">{% trans "Your Comment" %}</label>
                                <textarea name="content" class="form-control bg-light border-secondary text-dark" rows="5" placeholder="{% trans 'Write your thoughts here...' %}" required></textarea>
                            </div>
                            <div class="col-12 mt-4 text-start">
                                <button type="submit" class="btn btn-primary px-5 py-2 fw-bold shadow">{% trans "Post Comment" %}</button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>
{% endblock %}
