{% load i18n static %}
{% get_current_language as LANGUAGE_CODE %}
<header id="main-header" class="fixed-top mb-5">
    <nav class="navbar navbar-expand-lg navbar-light py-2">
        <div class="container">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="{% url 'core:home' %}">
                <img src="{% static 'images/favicon.png' %}" alt="Logo" class="logo me-2" style="height: 45px;">
                <span class="fs-5 text-dark">
                    {% if LANGUAGE_CODE == 'ar' %}
                    الهلال الدولي
                    {% else %}
                    Alhilal Aldawly
                    {% endif %}
                </span>
            </a>

            <button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#mobileNav" aria-controls="mobileNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Desktop Navigation -->
            <div class="collapse navbar-collapse d-none d-lg-flex" id="mainNavbar">
                <ul class="navbar-nav mx-auto mb-2 mb-lg-0 gap-lg-3">
                    <li class="nav-item">
                        <a class="nav-link text-uppercase fw-bold {% if request.resolver_match.url_name == 'home' %}active text-primary{% else %}text-dark{% endif %}"
                            href="{% url 'core:home' %}">{% trans "Home" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase fw-bold {% if request.resolver_match.url_name == 'about' %}active text-primary{% else %}text-dark{% endif %}"
                            href="{% url 'core:about' %}">{% trans "About Us" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase fw-bold {% if 'livestock' in request.path %}active text-primary{% else %}text-dark{% endif %}"
                            href="{% url 'livestock:list' %}">{% trans "Livestock" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase fw-bold {% if 'news' in request.path %}active text-primary{% else %}text-dark{% endif %}"
                            href="{% url 'news:list' %}">{% trans "News" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-uppercase fw-bold {% if request.resolver_match.url_name == 'contact' %}active text-primary{% else %}text-dark{% endif %}"
                            href="{% url 'core:contact' %}">{% trans "Contact" %}</a>
                    </li>
                </ul>

                <div class="d-flex align-items-center gap-3">
                    {% if user.is_authenticated %}
                    <a href="{% url 'dashboard:index' %}"
                        class="btn btn-outline-primary btn-sm px-3 fw-bold text-uppercase">
                        <i class="bi bi-speedometer2 me-1"></i> {% trans "Dashboard" %}
                    </a>
                    {% endif %}

                    {% get_current_language as NAV_LANG_CODE %}
                    <div class="lang-toggle">
                        <a href="/ar{{ request.get_full_path|cut:'/ar'|cut:'/en' }}"
                            class="lang-btn {% if NAV_LANG_CODE == 'ar' %}active{% endif %}">ع</a>
                        <a href="/en{{ request.get_full_path|cut:'/ar'|cut:'/en' }}"
                            class="lang-btn {% if NAV_LANG_CODE == 'en' %}active{% endif %}">EN</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

<!-- Mobile Offcanvas Sidebar -->
<div class="offcanvas offcanvas-{% if LANGUAGE_CODE == 'ar' %}start{% else %}end{% endif %} d-lg-none" tabindex="-1"
    id="mobileNav" aria-labelledby="mobileNavLabel">
    <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title text-dark fw-bold" id="mobileNavLabel">
            {% if LANGUAGE_CODE == 'ar' %}
            القائمة
            {% else %}
            Menu
            {% endif %}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <ul class="navbar-nav gap-3">
            <li class="nav-item">
                <a class="nav-link text-uppercase fw-bold {% if request.resolver_match.url_name == 'home' %}active text-primary{% else %}text-dark{% endif %}"
                    href="{% url 'core:home' %}">
                    <i class="bi bi-house-door me-2"></i>{% trans "Home" %}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-uppercase fw-bold {% if request.resolver_match.url_name == 'about' %}active text-primary{% else %}text-dark{% endif %}"
                    href="{% url 'core:about' %}">
                    <i class="bi bi-info-circle me-2"></i>{% trans "About Us" %}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-uppercase fw-bold {% if 'livestock' in request.path %}active text-primary{% else %}text-dark{% endif %}"
                    href="{% url 'livestock:list' %}">
                    <i class="bi bi-grid me-2"></i>{% trans "Livestock" %}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-uppercase fw-bold {% if 'news' in request.path %}active text-primary{% else %}text-dark{% endif %}"
                    href="{% url 'news:list' %}">
                    <i class="bi bi-newspaper me-2"></i>{% trans "News" %}
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-uppercase fw-bold {% if request.resolver_match.url_name == 'contact' %}active text-primary{% else %}text-dark{% endif %}"
                    href="{% url 'core:contact' %}">
                    <i class="bi bi-envelope me-2"></i>{% trans "Contact" %}
                </a>
            </li>
        </ul>

        <hr class="my-4">

        <div class="d-flex flex-column gap-3">
            {% if user.is_authenticated %}
            <a href="{% url 'dashboard:index' %}" class="btn btn-primary btn-sm fw-bold text-uppercase">
                <i class="bi bi-speedometer2 me-1"></i> {% trans "Dashboard" %}
            </a>
            {% endif %}

            {% get_current_language as MOBILE_LANG_CODE %}
            <div class="lang-toggle d-flex gap-2">
                <a href="/ar{{ request.get_full_path|cut:'/ar'|cut:'/en' }}"
                    class="lang-btn {% if MOBILE_LANG_CODE == 'ar' %}active{% endif %} flex-fill text-center">ع</a>
                <a href="/en{{ request.get_full_path|cut:'/ar'|cut:'/en' }}"
                    class="lang-btn {% if MOBILE_LANG_CODE == 'en' %}active{% endif %} flex-fill text-center">EN</a>
            </div>
        </div>
    </div>
</div>